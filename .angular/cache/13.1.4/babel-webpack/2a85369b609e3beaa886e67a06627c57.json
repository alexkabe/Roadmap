{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/database\";\nimport * as i2 from \"ngx-spinner\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@ng-bootstrap/ng-bootstrap\";\nconst _c0 = [\"scrollMe\"];\n\nfunction CardUserComponent_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵelementStart(1, \"div\", 16);\n    i0.ɵɵelementStart(2, \"div\", 17);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 18);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 19);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"hr\", 20);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r8.data);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.date_publication);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.date_publication);\n  }\n}\n\nfunction CardUserComponent_div_5_div_2_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function CardUserComponent_div_5_div_2_ng_template_2_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const item_r8 = i0.ɵɵnextContext(2).$implicit;\n      return item_r8.data = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function CardUserComponent_div_5_div_2_ng_template_2_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r20);\n      i0.ɵɵnextContext();\n\n      const _r17 = i0.ɵɵreference(7);\n\n      const i_r9 = i0.ɵɵnextContext().index;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.cancelUpdate(_r17, i_r9);\n    });\n    i0.ɵɵtext(2, \" Annuler \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function CardUserComponent_div_5_div_2_ng_template_2_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r20);\n      i0.ɵɵnextContext();\n\n      const _r17 = i0.ɵɵreference(7);\n\n      const item_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.deletePublication(item_r8.id, _r17);\n    });\n    i0.ɵɵtext(4, \"Supprimer\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function CardUserComponent_div_5_div_2_ng_template_2_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r20);\n      i0.ɵɵnextContext();\n\n      const _r17 = i0.ɵɵreference(7);\n\n      const item_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.updatePoint(item_r8.data, item_r8.id, _r17);\n    });\n    i0.ɵɵtext(6, \"Valider\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r8 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"ngModel\", item_r8.data);\n  }\n}\n\nfunction CardUserComponent_div_5_div_2_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Modifier le point en vert v\");\n  }\n}\n\nfunction CardUserComponent_div_5_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 0);\n    i0.ɵɵtemplate(2, CardUserComponent_div_5_div_2_ng_template_2_Template, 7, 1, \"ng-template\", 8, 9, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(4, CardUserComponent_div_5_div_2_ng_template_4_Template, 1, 0, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 21, 22);\n    i0.ɵɵlistener(\"click\", function CardUserComponent_div_5_div_2_Template_div_click_6_listener() {\n      i0.ɵɵrestoreView(_r30);\n\n      const _r17 = i0.ɵɵreference(7);\n\n      const item_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.openUpdate(item_r8.data, _r17);\n    });\n    i0.ɵɵtext(8, \" \\uD83C\\uDF54 \");\n    i0.ɵɵelementStart(9, \"div\", 17);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 18);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 19);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"hr\", 20);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r13 = i0.ɵɵreference(3);\n\n    const _r15 = i0.ɵɵreference(5);\n\n    const item_r8 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngbPopover\", _r13)(\"autoClose\", false)(\"popoverTitle\", _r15);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(item_r8.data);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.date_publication);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.date_publication);\n  }\n}\n\nfunction CardUserComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, CardUserComponent_div_5_div_1_Template, 9, 3, \"div\", 14);\n    i0.ɵɵtemplate(2, CardUserComponent_div_5_div_2_Template, 16, 6, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r8.status === true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r8.status === false);\n  }\n}\n\nfunction CardUserComponent_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 18);\n    i0.ɵɵtext(4, \"--:--:--\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 19);\n    i0.ɵɵtext(6, \"-- - -- - ----\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r32 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r32.inputValue);\n  }\n}\n\nfunction CardUserComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, CardUserComponent_div_6_div_1_Template, 7, 1, \"div\", 27);\n    i0.ɵɵelement(2, \"hr\", 20);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.tables.length === 0);\n  }\n}\n\nfunction CardUserComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function CardUserComponent_ng_template_9_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return ctx_r33.inputValue = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function CardUserComponent_ng_template_9_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r35 = i0.ɵɵnextContext();\n\n      const _r7 = i0.ɵɵreference(15);\n\n      return ctx_r35.removePoint(_r7);\n    });\n    i0.ɵɵtext(2, \" Annuler \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function CardUserComponent_ng_template_9_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r36 = i0.ɵɵnextContext();\n\n      const _r7 = i0.ɵɵreference(15);\n\n      return ctx_r36.validPoint(_r7);\n    });\n    i0.ɵɵtext(4, \"Valider\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.inputValue);\n  }\n}\n\nfunction CardUserComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Ajouter un nouveau point \");\n  }\n}\n\nexport let CardUserComponent = /*#__PURE__*/(() => {\n  class CardUserComponent {\n    // f: any;\n    // images = [944, 1011, 984].map((n) => `https://picsum.photos/id/${n}/900/500`);\n    constructor(database, spinner) {\n      this.database = database;\n      this.spinner = spinner;\n      this.titre = \"Alex kabe kabe\";\n      this.itemUpdate = \"\";\n      this.isClicked = false;\n      this.popIsOpen = false;\n      this.isCollapsed = true;\n      this.submitted = false;\n      this.inputValue = \"\";\n      this.userConnected = {};\n      this.tables = [];\n      this.userConnected = localStorage.getItem(\"userConnected\");\n      this.userConnected = JSON.parse(this.userConnected);\n      this.chargeData();\n    }\n\n    chargeData() {\n      this.spinner.show();\n      this.database.getDataOneUser(this.userConnected.id).subscribe(data => {\n        this.tables = data;\n        this.spinner.hide();\n      });\n    } // convenience getter for easy access to form fields\n\n\n    ngOnInit() {}\n\n    scrollToBottom() {// this.scroll.nativeElement.scrollTop = 0;\n    }\n\n    addPoint() {\n      this.isClicked = true;\n    }\n\n    removePoint(popContent) {\n      popContent.close();\n      this.inputValue = '';\n      this.isClicked = false;\n    }\n\n    validPoint(p) {\n      p.close();\n      this.isClicked = false;\n      let point = {\n        \"data\": this.inputValue,\n        \"user\": 2,\n        \"status\": false\n      }; // this.tables.push(point);\n\n      this.database.addPublication(point).subscribe(data => {\n        console.log(data);\n      });\n      this.inputValue = \"\";\n    }\n\n    updatePoint(item, idItem, p) {\n      let publication = {\n        \"id\": idItem,\n        \"data\": item,\n        \"user\": this.userConnected.id\n      };\n      console.log(publication);\n      this.database.updatePublication(publication).subscribe(valeur => {\n        console.log(item + idItem);\n        p.close();\n        this.popIsOpen = !this.popIsOpen;\n        this.chargeData();\n      });\n    }\n\n    openUpdate(item, p) {\n      if (!this.popIsOpen) {\n        this.itemUpdate = item;\n        p.open();\n        this.popIsOpen = !this.popIsOpen;\n      }\n    }\n\n    cancelUpdate(p, index) {\n      p.close();\n      this.tables[index].data = this.itemUpdate;\n      this.popIsOpen = !this.popIsOpen;\n    }\n\n    deletePublication(idItem, p) {\n      console.log(idItem);\n      this.database.deletePublication({\n        id: idItem\n      }).subscribe(val => {\n        this.chargeData();\n        p.close();\n      });\n    }\n\n  }\n\n  CardUserComponent.ɵfac = function CardUserComponent_Factory(t) {\n    return new (t || CardUserComponent)(i0.ɵɵdirectiveInject(i1.DataBase), i0.ɵɵdirectiveInject(i2.NgxSpinnerService));\n  };\n\n  CardUserComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CardUserComponent,\n    selectors: [[\"app-card-user\"]],\n    viewQuery: function CardUserComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.scroll = _t.first);\n      }\n    },\n    decls: 17,\n    vars: 5,\n    consts: [[1, \"picsum-img-wrapper\"], [1, \"scroll\"], [\"bdColor\", \"rgba(0, 0, 0, 1)\", \"template\", \"<img src='https://media.giphy.com/media/o8igknyuKs6aY/giphy.gif' />\"], [1, \"bod\"], [\"scrollMe\", \"\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"form\"], [\"class\", \"pop\"], [\"popContent\", \"\"], [\"popTitle\", \"\"], [2, \"text-align\", \"center\"], [\"type\", \"button\", \"triggers\", \"manual\", \"placement\", \"right\", 1, \"btn\", \"btn-outline-success\", 3, \"ngbPopover\", \"autoClose\", \"popoverTitle\", \"click\"], [\"p\", \"ngbPopover\"], [\"class\", \"rouge\", 4, \"ngIf\"], [1, \"rouge\"], [1, \"pointRouge\"], [1, \"titre\"], [1, \"heure\"], [1, \"date\"], [\"width\", \"1\", 1, \"verticalAlign\"], [\"triggers\", \"manual\", \"placement\", \"right\", 1, \"point\", 3, \"ngbPopover\", \"autoClose\", \"popoverTitle\", \"click\"], [\"pr\", \"ngbPopover\"], [\"type\", \"text\", \"size\", \"10%\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-danger\", \"bout\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"bout2\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-success\", \"bout2\", 3, \"click\"], [\"class\", \"point1\", 4, \"ngIf\"], [1, \"point1\"]],\n    template: function CardUserComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r37 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelement(2, \"ngx-spinner\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3, 4);\n        i0.ɵɵtemplate(5, CardUserComponent_div_5_Template, 3, 2, \"div\", 5);\n        i0.ɵɵtemplate(6, CardUserComponent_div_6_Template, 3, 1, \"div\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 0);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵtemplate(9, CardUserComponent_ng_template_9_Template, 5, 1, \"ng-template\", 8, 9, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(11, CardUserComponent_ng_template_11_Template, 1, 0, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementStart(13, \"div\", 11);\n        i0.ɵɵelementStart(14, \"button\", 12, 13);\n        i0.ɵɵlistener(\"click\", function CardUserComponent_Template_button_click_14_listener() {\n          i0.ɵɵrestoreView(_r37);\n\n          const _r7 = i0.ɵɵreference(15);\n\n          return _r7.open();\n        })(\"click\", function CardUserComponent_Template_button_click_14_listener() {\n          return ctx.addPoint();\n        });\n        i0.ɵɵtext(16, \" + \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r3 = i0.ɵɵreference(10);\n\n        const _r5 = i0.ɵɵreference(12);\n\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tables);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isClicked);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngbPopover\", _r3)(\"autoClose\", false)(\"popoverTitle\", _r5);\n      }\n    },\n    directives: [i2.NgxSpinnerComponent, i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.NgbPopover],\n    styles: [\".bod[_ngcontent-%COMP%]{margin-top:15px;padding-top:1%;height:510px;overflow:auto;margin-bottom:5%;text-align:center}.scroll[_ngcontent-%COMP%]{padding:0% 0 5%;height:auto}.verticalAlign[_ngcontent-%COMP%]{height:50px;margin:auto;background-color:#298754;border:.5px solid #298754}.point[_ngcontent-%COMP%]{width:30px;height:30px;padding-top:2px;margin:auto}.pointRouge[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:15px;background-color:#e73f3f;margin:auto}.titre[_ngcontent-%COMP%]{width:400px;height:45px;margin-left:35px;margin-top:-15px;font-family:Times New Roman,Times,serif;font-size:1.5em;text-align:left}.heure[_ngcontent-%COMP%]{width:250px;margin-top:-50px;margin-left:-260px;text-align:right;font-size:1em;font-family:Times New Roman,Times,serif}.date[_ngcontent-%COMP%]{width:250px;margin-top:-5px;margin-left:-260px;text-align:right;float:left;font-family:Times New Roman,Times,serif;font-size:1em}.bout[_ngcontent-%COMP%]{margin:2%}.bout2[_ngcontent-%COMP%]{margin:2%;float:right}.form[_ngcontent-%COMP%]{margin-bottom:5%}.pop[_ngcontent-%COMP%]{width:5%}\"]\n  });\n  return CardUserComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}